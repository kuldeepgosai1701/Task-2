<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Motion Tracker</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body, html { height: 100%; overflow: auto; font-family: Arial, sans-serif; }

    #dot {
      width: 12px;
      height: 12px;
      background-color: blue;
      border-radius: 50%;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 5;
    }

    .tracker-info, .sensitivity-box {
      position: fixed;
      background: white;
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      z-index: 10;
    }

    .tracker-info {
      top: 10px;
      left: 10px;
    }

    .sensitivity-box {
      top: 10px;
      right: 10px;
    }

    .footer {
      position: fixed;
      bottom: 0;
      width: 100%;
      background: #004080;
      color: white;
      text-align: center;
      padding: 5px 0;
      font-size: 14px;
    }
  </style>
</head>
<body>

<div id="dot"></div>

<div class="tracker-info">
  üìç <b>Tracker Info</b><br>
  Location: <span id="location">--</span><br>
  Direction: <span id="direction">--</span><br>
  <button onclick="resetDot()">Reset</button>
</div>

<div class="sensitivity-box">
  <label>Sensitivity</label><br>
  <input type="range" min="0" max="10" value="5" id="sensitivitySlider" />
  <div>Value: <span id="sensitivityValue">5</span></div>
</div>

<div class="footer">Created by Kuldeep Gosai</div>

<script>
  let dot = document.getElementById("dot");
  let sensitivitySlider = document.getElementById("sensitivitySlider");
  let sensitivityValue = document.getElementById("sensitivityValue");
  let locationText = document.getElementById("location");
  let directionText = document.getElementById("direction");

  let x = window.innerWidth / 2;
  let y = window.innerHeight / 2;
  let prevLat = null, prevLon = null;
  let prevX = x, prevY = y;
  let vibratedRecently = false;

  sensitivitySlider.addEventListener("input", () => {
    sensitivityValue.textContent = sensitivitySlider.value;
  });

  function resetDot() {
    x = window.innerWidth / 2;
    y = window.innerHeight / 2;
    dot.style.left = x + "px";
    dot.style.top = y + "px";
    prevLat = null;
    prevLon = null;
  }

  function drawLine(x1, y1, x2, y2) {
    const line = document.createElement("div");
    line.style.position = "absolute";
    line.style.left = Math.min(x1, x2) + "px";
    line.style.top = Math.min(y1, y2) + "px";
    line.style.width = Math.abs(x2 - x1) + "px";
    line.style.height = "2px";
    line.style.backgroundColor = vibratedRecently ? "red" : "blue";
    line.style.zIndex = "1";
    document.body.appendChild(line);
  }

  function updateDotPosition(lat, lon) {
    locationText.textContent = `${lat.toFixed(5)}, ${lon.toFixed(5)}`;

    if (prevLat !== null && prevLon !== null) {
      const dx = (lon - prevLon) * 100000;
      const dy = (lat - prevLat) * 100000;

      x += dx;
      y -= dy;

      drawLine(prevX, prevY, x, y);
    }

    prevLat = lat;
    prevLon = lon;
    prevX = x;
    prevY = y;

    dot.style.left = x + "px";
    dot.style.top = y + "px";

    window.scrollTo(x - window.innerWidth / 2, y - window.innerHeight / 2);
  }

  function getDirectionFromGyro(rotation) {
    if (!rotation) return "--";
    const { alpha, beta, gamma } = rotation;
    if (beta > 45) return "North";
    if (beta < -45) return "South";
    if (gamma > 45) return "East";
    if (gamma < -45) return "West";
    return "Stable";
  }

  function detectVibration(rotationRate, threshold) {
    const total = Math.abs(rotationRate.alpha || 0) + Math.abs(rotationRate.beta || 0) + Math.abs(rotationRate.gamma || 0);
    if (total > threshold) {
      vibratedRecently = true;
      setTimeout(() => {
        vibratedRecently = false;
      }, 500);
    }
  }

  // GPS tracker
  if ("geolocation" in navigator) {
    navigator.geolocation.watchPosition(position => {
      const { latitude, longitude } = position.coords;
      updateDotPosition(latitude, longitude);
    }, err => {
      console.error("GPS Error:", err);
    }, {
      enableHighAccuracy: true,
      maximumAge: 0,
      timeout: 5000
    });
  }

  // Gyroscope + Vibration
  window.addEventListener("devicemotion", function(event) {
    const rotationRate = event.rotationRate;
    const threshold = parseInt(sensitivitySlider.value);
    detectVibration(rotationRate, threshold);
    directionText.textContent = getDirectionFromGyro(rotationRate);
  });
</script>

</body>
</html>




























