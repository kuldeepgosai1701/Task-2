<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Motion Tracker</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Motion Tracking</h1>
  </header>


  <!-- LEFT SECTION -->
  <div style="display: flex; flex-direction: column; align-items: flex-start;">
    <p id="info" style="margin-bottom: 10px;">Move your phone to see the motion path.</p>
    <button onclick="resetTracker()">Reset</button>
  </div>
   <main style="display: flex; justify-content: center; align-items: flex-start; gap: 80px; margin: 40px auto; max-width: 1000px;">

  <!-- TRACKER SECTION -->
  <div id="tracker" style="width:300px; height:300px; position:relative; background:#eee; border:2px solid black;">
    <canvas id="motionCanvas" width="300" height="300" style="position:absolute; top:0; left:0; z-index:0;"></canvas>
    <div id="dot" style="width:20px; height:20px; background:blue; border-radius:50%; position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); z-index:1;"></div>
    <p id="direction" style="position:absolute; bottom:20px; width:100%; text-align:center;">Direction: Center</p>
    <p id="north" style="font-size: 30px; font-weight: bold; position: absolute; top: 15px; left: 50%; transform: translateX(-50%); color: black; z-index: 2;">N</p>
    </div>
</main>



  <footer>
    <p>Created by Kuldeep Gosai</p>
  </footer>

  <script>
  const dot = document.getElementById('dot');
  const tracker = document.getElementById('tracker');
  const directionText = document.getElementById('direction');
  const canvas = document.getElementById('motionCanvas');

  const ctx = canvas.getContext('2d');
  canvas.width = tracker.offsetWidth;
  canvas.height = tracker.offsetHeight;


  let x = tracker.offsetWidth / 2;
  let y = tracker.offsetHeight / 2;

  ctx.strokeStyle = 'blue';
  ctx.lineWidth = 4;
  ctx.beginPath();
  ctx.moveTo(x, y);

  function updateDirection(gamma, beta) {
    let dir = '';
    if (beta > 5) dir += 'South ';
    else if (beta < -5) dir += 'North ';
    if (gamma > 5) dir += 'East';
    else if (gamma < -5) dir += 'West';
    if (dir === '') dir = 'Center';
    directionText.textContent = `Direction: ${dir}`;
  }

  window.addEventListener('deviceorientation', (event) => {
    const gamma = event.gamma;
    const beta = event.beta;

    if (gamma !== null && beta !== null) {
      x += gamma * 0.1;
      y += beta * 0.1;

      x = Math.max(0, Math.min(tracker.offsetWidth - 6, x));
      y = Math.max(0, Math.min(tracker.offsetHeight - 6, y));
      ctx.lineTo(x, y);
      ctx.stroke();
      const trail = document.createElement('div');
      trail.style.width = '4px';
      trail.style.height = '4px';
      trail.style.background = 'blue';
      trail.style.position = 'absolute';
      trail.style.left = `${x + 2}px`;
      trail.style.top = `${y + 2}px`;
      tracker.appendChild(trail);

      dot.style.left = `${x}px`;
      dot.style.top = `${y}px`;

      updateDirection(gamma, beta);
    }
  });

   window.addEventListener('devicemotion', (event) => {
  const acc = event.acceleration;

  if (acc && acc.x && acc.y) {
    x += acc.x * 2;
    y += acc.y * 2;

    x = Math.max(0, Math.min(tracker.offsetWidth - 6, x));
    y = Math.max(0, Math.min(tracker.offsetHeight - 6, y));

    ctx.lineTo(x, y);
    ctx.stroke();

    dot.style.left = `${x}px`;
    dot.style.top = `${y}px`;
  }
});

  function resetTracker() {
  // Remove all trail dots
  const trails = tracker.querySelectorAll('div');
  trails.forEach(el => {
    if (el !== dot) el.remove();
  });

  // Reset position
  x = tracker.offsetWidth / 2;
  y = tracker.offsetHeight / 2;
  dot.style.left = `${x}px`;
  dot.style.top = `${y}px`;

  // Reset direction
  directionText.textContent = 'Direction: Center';
}
  </script>
</body>
</html>
