<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Motion Tracker</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
    }
    #main {
      position: relative;
      width: 100vw;
      height: 100vh;
      background-color: #f0f0f0;
      overflow: hidden;
    }
    #dot {
      position: absolute;
      width: 12px;
      height: 12px;
      background-color: blue;
      border-radius: 50%;
    }
    .trail {
      position: absolute;
      width: 4px;
      height: 4px;
      background-color: rgba(0, 0, 255, 0.5);
      border-radius: 50%;
      pointer-events: none;
    }
    #info {
      position: absolute;
      top: 10px;
      left: 10px;
      background: white;
      padding: 10px;
      border-radius: 5px;
      box-shadow: 0 0 5px rgba(0,0,0,0.3);
    }
  </style>
</head>
<body>
  <div id="main">
    <div id="dot"></div>
    <div id="info">
      <p>Move your phone to see the motion path.</p>
      <p id="direction">Direction: Center</p>
      <p id="location">Location: Fetching...</p>
      <button onclick="resetDot()">Reset</button>
      <button onclick="saveGPSData()">Save GPS</button>
      <h2 id="compass">N</h2>
    </div>
  </div>
  <footer style="text-align:center; padding: 10px; background:#eee;">
    Created by Kuldeep Gosai
  </footer>

  <script>
    const main = document.getElementById("main");
    const dot = document.getElementById("dot");
    const directionText = document.getElementById("direction");
    const locationText = document.getElementById("location");
    const compassText = document.getElementById("compass");

    let x, y;
    let gpsData = [];

    function initializeDotPosition() {
      const rect = main.getBoundingClientRect();
      x = rect.width / 2;
      y = rect.height / 2;
      moveDot(x, y);
    }

    function moveDot(newX, newY) {
      dot.style.left = `${newX}px`;
      dot.style.top = `${newY}px`;

      const trail = document.createElement("div");
      trail.className = "trail";
      trail.style.left = `${newX + 6}px`;
      trail.style.top = `${newY + 6}px`;
      main.appendChild(trail);
    }

    function resetDot() {
      main.querySelectorAll('.trail').forEach(e => e.remove());
      initializeDotPosition();
    }

    function saveGPSData() {
      const blob = new Blob([gpsData.join('\n')], { type: 'text/plain' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'gps_log.txt';
      a.click();
    }

    window.onload = () => {
      initializeDotPosition();

      if (window.DeviceOrientationEvent) {
        window.addEventListener('deviceorientation', (event) => {
          const alpha = event.alpha;
          if (alpha !== null) {
            let direction = "";
            if (alpha < 45 || alpha >= 315) direction = "N";
            else if (alpha < 135) direction = "E";
            else if (alpha < 225) direction = "S";
            else direction = "W";

            compassText.textContent = direction;
          }
        });
      }

      if (window.DeviceMotionEvent) {
        window.addEventListener('devicemotion', (event) => {
          const acc = event.accelerationIncludingGravity;
          if (acc) {
            const screenW = main.clientWidth;
            const screenH = main.clientHeight;

            x += acc.x * 2;
            y -= acc.y * 2;

            if (x < 0) x = 0;
            if (y < 0) y = 0;
            if (x > screenW) x = screenW;
            if (y > screenH) y = screenH;

            moveDot(x, y);

            if (navigator.geolocation) {
              navigator.geolocation.getCurrentPosition((pos) => {
                const lat = pos.coords.latitude;
                const lon = pos.coords.longitude;
                const vibration = acc.z.toFixed(2);
                const direction = compassText.textContent;
                const log = `Lat: ${lat}, Lon: ${lon}, Dir: ${direction}, Vib: ${vibration}`;
                gpsData.push(log);
                locationText.textContent = `Location: ${lat.toFixed(3)}, ${lon.toFixed(3)}`;
                directionText.textContent = `Direction: ${direction}`;
              });
            }
          }
        });
      }
    }
  </script>
</body>
</html>

















