<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gyroscope Motion Tracker</title>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <style>
    /* Your CSS styles remain unchanged */
  </style>
</head>
<body>
  <header>Motion Tracker</header>
  <main id="main">
    <div class="info">
      <p>Move your phone to see the motion path.</p>
      <p id="direction">Direction: Center</p>
      <p id="location">Location: Fetching...</p>
      <button onclick="location.reload()">Reset</button>
      <div class="compass">N</div>
    </div>
    <div id="dot"></div>
  </main>
  <footer>Created by Kuldeep Gosai</footer>

  <script>
    // âœ… Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyDh77dygGxVJMc8hRgm_ruQS_DW-vq_39M",
      authDomain: "gyroscope-explorer-1bafb.firebaseapp.com",
      databaseURL: "https://gyroscope-explorer-1bafb-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "gyroscope-explorer-1bafb",
      storageBucket: "gyroscope-explorer-1bafb.appspot.com",
      messagingSenderId: "471468344921",
      appId: "1:471468344921:web:3e9c27208209036ff401348"
    };

    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    const dot = document.getElementById("dot");
    const main = document.getElementById("main");
    const directionText = document.getElementById("direction");

    let x = window.innerWidth / 2;
    let y = window.innerHeight / 2;

    function moveDot(newX, newY) {
      dot.style.left = `${newX}px`;
      dot.style.top = `${newY}px`;

      const trail = document.createElement("div");
      trail.className = "trail";
      trail.style.left = `${newX + 6}px`;
      trail.style.top = `${newY + 6}px`;
      main.appendChild(trail);
    }

    function updateDirection(gamma, beta) {
      let dir = "";
      if (beta > 5) dir += "South ";
      else if (beta < -5) dir += "North ";
      if (gamma > 5) dir += "East";
      else if (gamma < -5) dir += "West";
      if (dir === "") dir = "Center";
      directionText.textContent = `Direction: ${dir}`;
      return dir;
    }

    function sendToFirebase(data) {
      const timestamp = Date.now();
      firebase.database().ref("motions/" + timestamp).set(data);
    }

    moveDot(x, y);

    window.addEventListener("deviceorientation", (event) => {
      const gamma = event.gamma;
      const beta = event.beta;

      if (gamma !== null && beta !== null) {
        x += gamma * 0.05;
        y += beta * 0.05;

        const screenW = window.innerWidth;
        const screenH = window.innerHeight;

        if (x < 0) x = screenW;
        if (x > screenW) x = 0;
        if (y < 0) y = screenH;
        if (y > screenH) y = 0;

        moveDot(x, y);

        const direction = updateDirection(gamma, beta);

        sendToFirebase({
          type: "orientation",
          gamma: gamma.toFixed(2),
          beta: beta.toFixed(2),
          direction: direction,
          timestamp: new Date().toISOString()
        });
      }
    });

    window.addEventListener("devicemotion", (event) => {
      const acc = event.acceleration;

      if (acc && acc.x !== null && acc.y !== null) {
        x += acc.x * 2;
        y += acc.y * 2;

        const screenW = window.innerWidth;
        const screenH = window.innerHeight;

        if (x < 0) x = screenW;
        if (x > screenW) x = 0;
        if (y < 0) y = screenH;
        if (y > screenH) y = 0;

        moveDot(x, y);

        sendToFirebase({
          type: "vibration",
          accX: acc.x.toFixed(2),
          accY: acc.y.toFixed(2),
          direction: directionText.textContent.replace("Direction: ", ""),
          timestamp: new Date().toISOString()
        });
      }
    });
  </script>
</body>
</html>













